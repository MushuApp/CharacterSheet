var Pluck;!function(a){var b=function(){function b(){}return b.prototype.sendNotification=function(b,c){a.ViewController.getRoot().sendNotification(b,c)},b.prototype.dispose=function(){},b}();a.Model=b}(Pluck||(Pluck={}));var Pluck;!function(a){var b=function(){function a(a,b){this._name=a,this._body=b}return Object.defineProperty(a.prototype,"name",{get:function(){return this._name},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"body",{get:function(){return this._body},enumerable:!0,configurable:!0}),a}();a.Notification=b}(Pluck||(Pluck={}));var Pluck;!function(a){var b=function(){function a(){this.data={}}return a.prototype.register=function(a){for(var b=a.interests,c=0;c<b.length;c++)this.registerRecipient(b[c],a)},a.prototype.unregister=function(a){for(var b=a.interests,c=0;c<b.length;c++){var d=this.getRecipients(b[c]);d.splice(d.indexOf(a),1)}},a.prototype.notify=function(a){var b=this.getRecipients(a.name);if(b){b=b.concat();for(var c=0;c<b.length;c++)b[c].handleNotification(a)}},a.prototype.registerRecipient=function(a,b){if(a in this.data){this.getRecipients(a).push(b)}else this.data[a]=[],this.data[a][0]=b},a.prototype.getRecipients=function(a){return this.data[a]},a}();a.NotificationMap=b}(Pluck||(Pluck={}));var Pluck;!function(a){var b=function(){function a(){this.keyArray=[],this.valueArray=[]}return a.prototype.add=function(a,b){var c=this.keyArray.indexOf(a);-1==c?(this.keyArray.push(a),this.valueArray.push(b)):this.valueArray[c]=b},a.prototype.getVal=function(a){var b=this.keyArray.indexOf(a);return this.valueArray[b]},a.prototype.del=function(a){var b=this.keyArray.indexOf(a);this.keyArray.splice(b,1),this.valueArray.splice(b,1)},a}();a.HashMap=b}(Pluck||(Pluck={}));var Pluck;!function(a){var b=function(){function b(b,c){void 0===b&&(b=null),void 0===c&&(c=null),this.interests=[],this.parent=null,this.children=[],this.autoDispose=!0,this._view=b,this._model=c,this._name=a.GlobalFNs.getQualifiedClassName(this)}return b.setRoot=function(a){if(this.root)throw new Error("Root controller has been already set!");this.root=a,this.controllerMap.add(this.root.constructor,this.root),this.root.onRegister(),b.notificationMap.register(this.root)},b.getRoot=function(){return this.root},b.disposeRootController=function(){for(;this.root.children.length>0;)this.root.removeChildViewController(this.root.children[0]);this.controllerMap.del(this.root.constructor),this.notificationMap.unregister(this.root),this.root.onUnregister(),this.root.autoDispose&&this.root.destroy(),this.root=null},b.prototype.sendNotification=function(c,d){b.notificationMap.notify(new a.Notification(c,d))},b.prototype.handleNotification=function(a){},b.prototype.onRegister=function(){},b.prototype.onUnregister=function(){},b.prototype.hasChildViewController=function(a){return-1!=this.children.indexOf(a)},b.prototype.addChildViewController=function(a){return this.hasChildViewController(a)||(this.children.push(a),a.parent=this,b.controllerMap.add(a.constructor,a),b.notificationMap.register(a),this._view instanceof PIXI.DisplayObject&&a._view instanceof PIXI.DisplayObject&&this._view.addChild(a._view),a.onRegister()),a},b.prototype.removeChildViewController=function(a){if(this.hasChildViewController(a)){for(;a.children.length>0;)a.removeChildViewController(a.children[0]);this.children.splice(this.children.indexOf(a),1),a.parent=null,b.controllerMap.del(a.constructor),b.notificationMap.unregister(a),a.onUnregister(),a.autoDispose&&a.destroy()}},b.prototype.destroy=function(){this.dispose(),this._view&&"dispose"in this._view&&this._view.dispose(),this._model&&"dispose"in this._model&&this._model.dispose(),this._view instanceof PIXI.DisplayObject&&(this._view.parent&&this._view.parent.removeChild(this._view),this._view=null,this._model=null)},b.prototype.dispose=function(){},b.prototype.getController=function(a){return void 0==b.controllerMap.getVal(a)?null:b.controllerMap.getVal(a)},b.prototype.unique=function(){return this.getController(this._name)||this},Object.defineProperty(b.prototype,"name",{get:function(){return this._name},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"zIndex",{get:function(){if(this._view instanceof PIXI.DisplayObject){var a=this._view;return a.parent?a.parent.getChildIndex(a):-1}return-1},set:function(a){if(this._view instanceof PIXI.DisplayObject){var b=this._view;b.parent&&b.parent.setChildIndex(b,a)}},enumerable:!0,configurable:!0}),b.controllerMap=new a.HashMap,b.notificationMap=new a.NotificationMap,b.root=null,b}();a.ViewController=b}(Pluck||(Pluck={}));var Pluck;!function(a){var b=function(){function a(){throw new Error("This is a static class")}return a.flatten=function(a){for(var b=[],c=0;c<a.length;c++){var d=a[c];d instanceof Array?b=b.concat(this.flatten(d)):b.push(d)}return b},a.equals=function(a,b){if(a.length!=b.length)return!1;for(var c=0;c<a.length;c++)if(a[c]!=b[c])return!1;return!0},a.diff=function(a,b){for(var c=[],d=0;d<a.length;d++)a.indexOf(b)>-1&&c.push(a[d]);return c},a}();a.ArrayTools=b}(Pluck||(Pluck={}));var Pluck;!function(a){var b=function(){function a(){}return a.prototype.serialize=function(b){for(var c in b)this.hasOwnProperty(c)&&("object"==typeof this[c]&&this[c]instanceof a?this[c].serialize(b[c]):this[c]=b[c])},a}();a.External=b}(Pluck||(Pluck={}));var Pluck;!function(a){var b=function(){function a(){throw new Error("This is a static class")}return a.isMobile=function(){return!!(navigator.userAgent.match(/Android/i)||navigator.userAgent.match(/webOS/i)||navigator.userAgent.match(/iPhone/i)||navigator.userAgent.match(/iPad/i)||navigator.userAgent.match(/iPod/i)||navigator.userAgent.match(/BlackBerry/i)||navigator.userAgent.match(/Windows Phone/i))},a.getQualifiedClassName=function(a){return a.constructor.Name},a}();a.GlobalFNs=b}(Pluck||(Pluck={}));var __extends=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)},App;!function(a){var b=function(b){function c(){b.call(this,new a.RootView,new a.RootModel),this.interests=[],this.interaction=new a.Interaction,this.renderer=PIXI.autoDetectRenderer(200,400,{roundPixels:!0}),this.renderer.backgroundColor=15792383,$("#canvasContainer").append(this.renderer.view),this.animate()}return __extends(c,b),c.prototype.onRegister=function(){this.addChildViewController(new a.TabController(new a.TabView,new a.TabModel)),this.sendNotification("drawTabs")},c.prototype.handleNotification=function(a){},c.prototype.animate=function(){this.renderer.render(this._view);var a=this;requestAnimationFrame(function(){a.animate()})},c}(Pluck.ViewController);a.RootController=b}(App||(App={}));var App;!function(a){var b=function(a){function b(b,c){a.call(this,b,c),this.interests=["drawTabs","dontClickOnMe","thanksForStopingThat","leaveMeBe","youLeaveMe"]}return __extends(b,a),b.prototype.handleNotification=function(a){if(console.log("notification:",a),"dontClickOnMe"==a.name){var b=a.body.event;b.currentTarget&&(b.currentTarget.dragging=!0,b.currentTarget.alpha=.5,b.data.getLocalPosition(b.currentTarget.parent,this._model.mousePosition)),b.stopPropagation()}else if("thanksForStopingThat"==a.name){var c=a.body.event.target;c.dragging=!1,c.alpha=1}else if("leaveMeBe"==a.name){var d=a.body.event;if(d.currentTarget&&d.currentTarget.dragging){var e=d.data.getLocalPosition(d.currentTarget.parent);d.currentTarget.position.x+=Math.round(e.x-this._model.mousePosition.x),this._model.mousePosition.copy(e),this.checkTabs(d.currentTarget,this._model.tabs)}}else if("youLeaveMe"==a.name){var f=a.body.event;f.currentTarget&&(f.currentTarget.dragging=!1,f.currentTarget.alpha=1)}else(a.name="drawTabs")&&this.drawRect()},b.prototype.checkTabs=function(a,b){console.log("target:",a)},b.prototype.drawRect=function(){var a=this._view.drawRect(),b=Pluck.ViewController.getRoot();a.name=this._model.tabs[0],b.interaction.attachEvents(a),this.checkTabs(a,b)},b}(Pluck.ViewController);a.TabController=b}(App||(App={}));var App;!function(a){var b=function(a){function b(){a.call(this)}return __extends(b,a),b.prototype.attachEvents=function(a){var b=this;this.interactOn(a),a.on("pointerdown",function(a){b.sendNotification("dontClickOnMe",{event:a})}),a.on("pointerup",function(a){b.sendNotification("thanksForStopingThat",{event:a})}),a.on("pointerupoutside",function(a){b.sendNotification("youLeaveMe",{event:a})}),a.on("pointermove",function(a){b.sendNotification("leaveMeBe",{event:a})})},b.prototype.interactOn=function(a){a.interactive=!0,a.buttonMode=!0},b.prototype.interactOff=function(a){a.interactive=!1,a.buttonMode=!1},b}(Pluck.Model);a.Interaction=b}(App||(App={}));var App;!function(a){var b=function(a){function b(){a.call(this),this.map=new Pluck.HashMap}return __extends(b,a),b}(Pluck.Model);a.RootModel=b}(App||(App={}));var App;!function(a){var b=function(a){function b(){a.call(this),this._tabs=["Main","Stats","Skills"],this.mousePosition=new PIXI.Point(0,0)}return __extends(b,a),Object.defineProperty(b.prototype,"tabs",{get:function(){return this._tabs.slice()},enumerable:!0,configurable:!0}),b}(Pluck.Model);a.TabModel=b}(App||(App={}));var App;!function(a){var b=function(a){function b(){a.call(this),this._name="RootContainer"}return __extends(b,a),Object.defineProperty(b.prototype,"name",{get:function(){return this._name},enumerable:!0,configurable:!0}),b}(PIXI.Container);a.RootView=b}(App||(App={}));var App;!function(a){var b=function(a){function b(){a.call(this),this._name="TabView"}return __extends(b,a),Object.defineProperty(b.prototype,"name",{get:function(){return this._name},enumerable:!0,configurable:!0}),b.prototype.drawRect=function(){var a;return a=new PIXI.Graphics,a.lineStyle(1,1378570),a.beginFill(2481357,.8),a.drawRect(0,0,200,400),a.endFill(),this.addChild(a),a},b}(PIXI.Container);a.TabView=b}(App||(App={}));
//# sourceMappingURL=lib.min.js.map